<div class="row">
	<div class="col-md-12 page-header">
		<h2>
			<a href="#/main/admin/apps">Apps</a> | {{app.name}} <span
				ng-if="changed">*</span>
		</h2>
	</div>
</div>
<div class="row">
	<div class="col-md-6">
		<div class="row">
			<div class="col-md-12">
				<h4>App</h4>
			</div>
			<div class="col-md-12">
				<div class="form form-group">
					<label>Name</label> 
					<input ng-model="app.name" ng-change="startChange()" class="form-control" />
				</div>
			</div>
			<div class="col-md-12">
				<div class="form form-group">
					<label>Url</label>
					<input ng-model="app.url" ng-change="startChange()" class="form-control" />
				</div>
			</div>
			<div class="col-md-12">
				<div class="form form-group">
					<label>Icon</label>
					<div class="well well-sm">
						<img src="/autonubil/api/apps/apps/{{app.id}}/icon" id="icon" style="max-height: 5em; max-width: 10em">
					</div>
					<div 
						upload-button url="/autonubil/api/apps/apps/{{app.id}}/icon"
						on-success="uploadSuccess(response)">
					</div>
				</div>
			</div>
			<div class="col-md-12">
				<div class="form form-group">
					<label>Description</label>
					<textarea cols="40" rows="20" ng-model="app.description" ng-blur="startChange()" class="form-control"></textarea>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-6">
		<div class="row">
			<div class="col-md-12">
				<h4>Access</h4>
			</div>
			<div class="col-md-12" ng-if="!permissions || permissions.length==0">
				<div class="alert alert-warning">
					<i>No groups configured here</i>
				</div>
			</div>
			<div class="col-md-12">
				<table class="table table-striped table-compact">
					<tr ng-repeat="permission in permissions">
						<td>{{permission.name}}</td>
						<td width="20">
							<button
								ng-click="removePermission(permission.sourceId,permission.groupId)"
								class="btn btn-danger form-control">
								<i class="glyphicon glyphicon-minus"> </i>
							</button>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4">
				<select class="form-control" ng-model="newPermission.source"
					ng-change="updateGroups()"
					ng-options="config as config.name for config in configs">
				</select>
			</div>
			<div class="col-md-6">
				<select class="form-control" ng-model="newPermission.group"
					ng-options="group as group.displayName for group in groups"
					ng-disable="!groups">
				</select>
			</div>
			<div class="col-md-2">
				<button ng-click="addPermission()"
					class="btn btn-primary form-control"
					ng-disabled="newPermission.group.id.length == 0">
					<i class="glyphicon glyphicon-plus"> </i>
				</button>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
			</div>
		</div>
		<div class="row">
		</div>

	</div>
</div>
